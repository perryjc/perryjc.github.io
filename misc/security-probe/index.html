<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Security Probe - PoC</title>
    <style>
        body { background-color: #111; color: #0f0; font-family: 'Courier New', monospace; padding: 20px; }
        h1 { border-bottom: 1px solid #0f0; padding-bottom: 10px; }
        pre { background-color: #222; padding: 15px; border: 1px solid #0f0; white-space: pre-wrap; word-wrap: break-word; }
    </style>
</head>
<body>
    <!--Site grabs and displays user data. current test, submit as link via Canvas and see server info after it gives preview-->
    <!--grabs server-side and client-side info useing vercel and ip-api.com, captures more info than info_grabber, but more difficult to read-->
    <!--to access, visit: https://perryjc-github-io.vercel.app/-->
    <h1>Data Capture Report</h1>
    
    <h2>Server-Side Data (Headers, IP, etc.)</h2>
    <pre id="server-info">Fetching server-side data...</pre>

    <h2>Client-Side Data (Browser Environment)</h2>
    <pre id="client-info">Fetching client-side data...</pre>

    <script>
        async function main() {
            // --- SERVER-SIDE FETCH ---
            try {
                const response = await fetch('/api/probe');
                const serverData = await response.json();
                document.getElementById('server-info').textContent = JSON.stringify(serverData, null, 2);
            } catch (e) {
                document.getElementById('server-info').textContent = `Error fetching server data: ${e.message}`;
            }

            // --- CLIENT-SIDE GATHERING ---
            const clientData = {
                'Browser Environment': {
                    userAgent: navigator.userAgent, platform: navigator.platform, language: navigator.language,
                    vendor: navigator.vendor, webdriver: navigator.webdriver || 'Not reported',
                },
                'Screen Details': {
                    resolution: `${screen.width}x${screen.height}`, colorDepth: screen.colorDepth,
                },
                'Time Information': {
                    systemTime: new Date().toString(),
                },
            };
            document.getElementById('client-info').textContent = JSON.stringify(clientData, null, 2);
        }

        main();
    </script>
</body>
</html>